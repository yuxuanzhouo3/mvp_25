# åŒæ•°æ®åº“é€‚é…å™¨ - æµ‹è¯•æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æˆ‘ä»¬å·²ç»æˆåŠŸå®ç°äº†åŒæ•°æ®åº“é€‚é…å™¨ï¼Œå¯ä»¥åŒæ—¶ä» Supabase å’Œ CloudBase è·å–æ•°æ®å¹¶èšåˆç»Ÿè®¡ã€‚

**ä¿®æ”¹çš„æ–‡ä»¶**ï¼š
- [lib/admin/dual-database-adapter.ts](lib/admin/dual-database-adapter.ts) - æ–°å»ºçš„åŒæ•°æ®åº“é€‚é…å™¨
- [lib/admin/database.ts](lib/admin/database.ts) - ä¿®æ”¹ä¸ºä½¿ç”¨åŒæ•°æ®åº“é€‚é…å™¨
- [actions/admin-test-data.ts](actions/admin-test-data.ts) - æµ‹è¯•æ•°æ®ç®¡ç†
- [app/admin/settings/page.tsx](app/admin/settings/page.tsx) - æ·»åŠ æµ‹è¯•æ•°æ®ç®¡ç†UI

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼1ï¼šé€šè¿‡ç®¡ç†åå°UIåˆ›å»ºæµ‹è¯•æ•°æ®ï¼ˆæ¨èï¼‰

#### æ­¥éª¤1ï¼šå¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
cd "D:\newcode\ai teacher\fuben2-project\mvp_25-main\mvp_25-main"
npm run dev
```

#### æ­¥éª¤2ï¼šç™»å½•ç®¡ç†åå°

è®¿é—®ï¼š`http://localhost:3000/admin/login`

ä½¿ç”¨ç®¡ç†å‘˜è´¦å·ç™»å½•

#### æ­¥éª¤3ï¼šåˆ›å»ºæµ‹è¯•æ•°æ®

1. ç‚¹å‡»ä¾§è¾¹æ çš„"ç³»ç»Ÿè®¾ç½®"
2. ç‚¹å‡»"æµ‹è¯•æ•°æ®"æ ‡ç­¾é¡µ
3. ç‚¹å‡»"åˆ›å»ºæµ‹è¯•æ”¯ä»˜æ•°æ®"æŒ‰é’®
4. ç­‰å¾…åˆ›å»ºå®Œæˆï¼ˆçº¦2-3ç§’ï¼‰
5. æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯

#### æ­¥éª¤4ï¼šéªŒè¯æ•°æ®

åˆ›å»ºæˆåŠŸåï¼Œç‚¹å‡»ï¼š
- "æŸ¥çœ‹æ”¯ä»˜è®°å½•" - æŸ¥çœ‹åˆ›å»ºçš„æ”¯ä»˜è®°å½•
- "æŸ¥çœ‹ä»ªè¡¨æ¿" - æŸ¥çœ‹æ”¶å…¥ç»Ÿè®¡

#### æ­¥éª¤5ï¼šåˆ é™¤æµ‹è¯•æ•°æ®

å›åˆ°"æµ‹è¯•æ•°æ®"é¡µé¢ï¼Œç‚¹å‡»"åˆ é™¤æ‰€æœ‰æµ‹è¯•æ•°æ®"

---

### æ–¹å¼2ï¼šä½¿ç”¨ Playwright è‡ªåŠ¨åŒ–æµ‹è¯•

#### å®‰è£…ä¾èµ–

```bash
npm install -D @playwright/test
npx playwright install
```

#### é…ç½®ç¯å¢ƒå˜é‡

åˆ›å»º `.env.local` æ–‡ä»¶ï¼š

```bash
BASE_URL=http://localhost:3000
ADMIN_USERNAME=admin
ADMIN_PASSWORD=your_password
```

#### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npx playwright test

# è¿è¡Œæµ‹è¯•æ•°æ®ç›¸å…³æµ‹è¯•
npx playwright test tests/admin/test-data.spec.ts

# æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š
npx playwright show-report
```

#### æµ‹è¯•å†…å®¹

æµ‹è¯•è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. âœ… ç™»å½•ç®¡ç†åå°
2. âœ… å¯¼èˆªåˆ°è®¾ç½®é¡µé¢
3. âœ… åˆ›å»ºæµ‹è¯•æ”¯ä»˜æ•°æ®
4. âœ… éªŒè¯åˆ›å»ºè¯¦æƒ…ï¼ˆ8æ¡è®°å½•ï¼ŒUSD $377.98ï¼ŒCNY Â¥597ï¼‰
5. âœ… æŸ¥çœ‹æ”¯ä»˜è®°å½•é¡µé¢
6. âœ… æŸ¥çœ‹ä»ªè¡¨æ¿ç»Ÿè®¡
7. âœ… åˆ é™¤æµ‹è¯•æ•°æ®

---

## ğŸ” éªŒè¯åŒæ•°æ®åº“åŠŸèƒ½

### æ‰‹åŠ¨éªŒè¯æ­¥éª¤

#### éªŒè¯1ï¼šæ£€æŸ¥æ•°æ®èšåˆ

1. åˆ›å»ºæµ‹è¯•æ•°æ®åï¼Œåœ¨"æ”¯ä»˜è®°å½•"é¡µé¢æŸ¥çœ‹
2. åº”è¯¥çœ‹åˆ° 8 æ¡æ”¯ä»˜è®°å½•ï¼ˆStripe 4ç¬”ã€PayPal 1ç¬”ã€WeChat 2ç¬”ã€Alipay 1ç¬”ï¼‰
3. è®°å½•åŒ…æ‹¬ä¸åŒæ”¯ä»˜æ–¹å¼ï¼ˆstripe, paypal, wechat, alipayï¼‰

#### éªŒè¯2ï¼šæ£€æŸ¥æ”¶å…¥ç»Ÿè®¡

1. è¿›å…¥"ä»ªè¡¨æ¿"é¡µé¢
2. æŸ¥çœ‹"æ€»æ”¶å…¥"å¡ç‰‡
3. åº”è¯¥çœ‹åˆ°ï¼š
   - å›½é™…ç‰ˆæ”¯ä»˜ï¼ˆStripe + PayPalï¼‰ï¼š$377.98
   - å›½å†…ç‰ˆæ”¯ä»˜ï¼ˆWeChat + Alipayï¼‰ï¼šÂ¥597

#### éªŒè¯3ï¼šæ£€æŸ¥æŒ‰æ”¯ä»˜æ–¹å¼ç»Ÿè®¡

åœ¨ä»ªè¡¨æ¿åº”è¯¥çœ‹åˆ°ï¼š
- Stripe: $327.98ï¼ˆ3ç¬”å·²æ”¯ä»˜ï¼‰
- PayPal: $50.00ï¼ˆ1ç¬”ï¼‰
- WeChat: Â¥298.00ï¼ˆ2ç¬”ï¼‰
- Alipay: Â¥299.00ï¼ˆ1ç¬”ï¼‰

---

## ğŸ“Š æµ‹è¯•æ•°æ®è¯¦æƒ…

### åˆ›å»ºçš„æ”¯ä»˜è®°å½•

| # | æ”¯ä»˜æ–¹å¼ | é‡‘é¢ | è´§å¸ | çŠ¶æ€ | è¯´æ˜ |
|---|----------|------|------|------|------|
| 1 | Stripe | $29.99 | USD | paid | Pro Monthly |
| 2 | Stripe | $99.00 | USD | paid | Pro Yearly |
| 3 | PayPal | $49.99 | USD | paid | Pro Quarterly |
| 4 | Stripe | $199.00 | USD | paid | Enterprise |
| 5 | Stripe | $9.99 | USD | pending | Pending |
| 6 | Alipay | Â¥299.00 | CNY | paid | Enterprise Yearly |
| 7 | WeChat | Â¥199.00 | CNY | paid | Enterprise |
| 8 | WeChat | Â¥99.00 | CNY | paid | Pro Yearly |

**ç»Ÿè®¡æ‘˜è¦**ï¼š
- æ€»è®°å½•æ•°ï¼š8 æ¡
- Stripeï¼š4 æ¡
- PayPalï¼š1 æ¡
- WeChatï¼š2 æ¡
- Alipayï¼š1 æ¡
- USD æ€»è®¡ï¼š$377.98ï¼ˆå·²æ”¯ä»˜éƒ¨åˆ†ï¼‰
- CNY æ€»è®¡ï¼šÂ¥597.00

---

## ğŸ”§ è°ƒè¯•å’Œæ’é”™

### å¦‚æœæµ‹è¯•æ•°æ®åˆ›å»ºå¤±è´¥

**æ£€æŸ¥é¡¹**ï¼š
1. âœ… Supabase ç¯å¢ƒå˜é‡æ˜¯å¦é…ç½®æ­£ç¡®
2. âœ… Supabase è¿æ¥æ˜¯å¦æ­£å¸¸
3. âœ… payments è¡¨æ˜¯å¦å­˜åœ¨

**æŸ¥çœ‹æ—¥å¿—**ï¼š
```bash
# å¼€å‘æœåŠ¡å™¨æ—¥å¿—ä¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
npm run dev
```

### å¦‚æœç»Ÿè®¡ä¸æ­£ç¡®

**æ£€æŸ¥é¡¹**ï¼š
1. âœ… æ˜¯å¦ä½¿ç”¨äº† DualDatabaseAdapter
2. âœ… ä¸¤ä¸ªæ•°æ®åº“æ˜¯å¦éƒ½æœ‰æ•°æ®
3. âœ… æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯

**éªŒè¯é€‚é…å™¨**ï¼š
```typescript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œ
localStorage.getItem('admin_session') // ç¡®è®¤å·²ç™»å½•
```

---

## ğŸ“ˆ ä¸‹ä¸€æ­¥

### CloudBase éªŒè¯ï¼ˆå¾…CloudBaseç™»å½•åï¼‰

ä¸€æ—¦ CloudBase å¯ç”¨ï¼š

1. åœ¨ CloudBase åˆ›å»ºç›¸åŒçš„æµ‹è¯•æ•°æ®
2. éªŒè¯åŒæ•°æ®åº“èšåˆåŠŸèƒ½
3. ç¡®è®¤ä¸¤ä¸ªæ•°æ®åº“çš„æ•°æ®éƒ½è¢«æ­£ç¡®ç»Ÿè®¡

**é¢„æœŸç»“æœ**ï¼š
- Supabase çš„ 8 æ¡è®°å½• + CloudBase çš„è®°å½• = æ€»è®°å½•æ•°
- æ”¶å…¥ç»Ÿè®¡ = Supabase æ”¶å…¥ + CloudBase æ”¶å…¥

### æ€§èƒ½æµ‹è¯•

æµ‹è¯•åŒæ•°æ®åº“æŸ¥è¯¢çš„æ€§èƒ½ï¼š

```typescript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œ
console.time('dual-db-query');
// åˆ·æ–°é¡µé¢
console.timeEnd('dual-db-query');
```

**ç›®æ ‡**ï¼šæŸ¥è¯¢æ—¶é—´ < 1ç§’ï¼ˆå¹¶è¡ŒæŸ¥è¯¢ï¼‰

---

## ğŸ“ æµ‹è¯•æ¸…å•

- [ ] âœ… åˆ›å»ºæµ‹è¯•æ•°æ®æˆåŠŸ
- [ ] âœ… æ”¯ä»˜è®°å½•é¡µé¢æ˜¾ç¤º 8 æ¡è®°å½•
- [ ] âœ… ä»ªè¡¨æ¿æ˜¾ç¤ºæ­£ç¡®çš„æ”¶å…¥ç»Ÿè®¡
- [ ] âœ… æŒ‰æ”¯ä»˜æ–¹å¼ç»Ÿè®¡æ­£ç¡®
- [ ] âœ… åˆ é™¤æµ‹è¯•æ•°æ®æˆåŠŸ
- [ ] â³ CloudBase æ•°æ®éªŒè¯ï¼ˆå¾… CloudBase ç™»å½•ï¼‰
- [ ] â³ åŒæ•°æ®åº“èšåˆéªŒè¯ï¼ˆå¾… CloudBase ç™»å½•ï¼‰
- [ ] â³ æ€§èƒ½æµ‹è¯•ï¼ˆå¾…å®šï¼‰

---

## ğŸ¯ æˆåŠŸæ ‡å‡†

**è€æ¿è§†è§’çš„éªŒè¯**ï¼š

1. âœ… **èƒ½çœ‹åˆ°æ‰€æœ‰æ”¶å…¥**ï¼šä¸ä¼šé—æ¼ä»»ä½•ä¸€ç¬”æ”¶æ¬¾
2. âœ… **æ•°æ®å‡†ç¡®**ï¼šç»Ÿè®¡çš„æ€»æ”¶å…¥ = Supabase + CloudBase
3. âœ… **æŒ‰æ”¯ä»˜æ–¹å¼åˆ†ç»„**ï¼šæ¸…æ¥šçœ‹åˆ°å„æ¸ é“çš„æ”¶å…¥
4. âœ… **ç”¨æˆ·ä½“éªŒå¥½**ï¼šé¡µé¢åŠ è½½é€Ÿåº¦å¿«ï¼ˆ< 1ç§’ï¼‰

---

## ğŸ› å·²çŸ¥é—®é¢˜

1. âš ï¸ **CloudBase æš‚æœªé…ç½®** - å½“å‰åªæµ‹è¯•äº† Supabase
2. âš ï¸ **è´§å¸æ··ç”¨** - USD å’Œ CNY ç›´æ¥ç›¸åŠ ï¼Œéœ€è¦è€ƒè™‘æ±‡ç‡è½¬æ¢ï¼ˆå¾…ä¼˜åŒ–ï¼‰

---

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. å¼€å‘æœåŠ¡å™¨æ—¥å¿—
2. æµè§ˆå™¨æ§åˆ¶å°
3. Playwright æµ‹è¯•æŠ¥å‘Š

æµ‹è¯•æ–‡ä»¶ä½ç½®ï¼š
- UI: [app/admin/settings/page.tsx](app/admin/settings/page.tsx)
- Server Actions: [actions/admin-test-data.ts](actions/admin-test-data.ts)
- Playwright: [tests/admin/test-data.spec.ts](tests/admin/test-data.spec.ts)
